<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Liafiz Picks Search</title>

  <style>
    :root{
      --bg: #f5f5f5;
      --card: #ffffff;
      --text: #111;
      --muted: #666;
      --accent: #000;
      --input-border: #ccc;
      --shadow: 0 0 10px rgba(0,0,0,0.08);
    }

    /* Dark theme variables */
    @media (prefers-color-scheme: dark){
      :root{
        --bg: #0f1113;
        --card: #0b0c0d;
        --text: #e8ecee;
        --muted: #aab0b5;
        --accent: #f5f5f5;
        --input-border: #222425;
        --shadow: 0 6px 18px rgba(0,0,0,0.6);
      }
    }

    /* When user forces theme via HTML data attribute */
    html[data-theme="dark"] {
      --bg: #0f1113;
      --card: #0b0c0d;
      --text: #e8ecee;
      --muted: #aab0b5;
      --accent: #f5f5f5;
      --input-border: #222425;
      --shadow: 0 6px 18px rgba(0,0,0,0.6);
    }
    html[data-theme="light"] {
      --bg: #f5f5f5;
      --card: #ffffff;
      --text: #111;
      --muted: #666;
      --accent: #000;
      --input-border: #ccc;
      --shadow: 0 0 10px rgba(0,0,0,0.08);
    }

    *{box-sizing:border-box}
    body{
      margin:0;
      font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, Arial;
      background:var(--bg);
      color:var(--text);
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
      min-height:100vh;
      display:flex;
      align-items:center;
      justify-content:center;
      padding:20px;
    }

    .container{
      width:100%;
      max-width:420px;
    }

    .box{
      background:var(--card);
      padding:22px;
      border-radius:14px;
      box-shadow:var(--shadow);
      text-align:center;
      transition:background .25s, color .25s, box-shadow .25s;
    }

    h2{margin:0 0 6px;font-size:20px}
    p.small{margin:0 0 12px;color:var(--muted);font-size:13px}

    .controls{
      display:flex;
      gap:8px;
      align-items:center;
      justify-content:center;
      margin-top:10px;
    }

    input[type="text"]{
      width:100%;
      padding:12px 14px;
      border-radius:10px;
      border:1px solid var(--input-border);
      outline:none;
      font-size:15px;
      background:transparent;
      color:var(--text);
      text-transform:uppercase;
      transition:border .12s, box-shadow .12s;
    }
    input[type="text"]:focus{
      box-shadow:0 4px 10px rgba(0,0,0,0.08);
      border-color:var(--accent);
    }

    .row{
      display:flex;
      gap:10px;
      margin-top:12px;
    }

    button.primary{
      flex:1;
      padding:12px 14px;
      border-radius:10px;
      border:0;
      background:var(--accent);
      color:var(--card);
      font-weight:600;
      cursor:pointer;
    }

    .theme-toggle{
      display:inline-flex;
      align-items:center;
      gap:8px;
      font-size:13px;
      color:var(--muted);
      margin-top:12px;
      justify-content:center;
    }

    .switch{
      width:44px;height:24px;border-radius:999px;background:#ddd;position:relative;cursor:pointer;
    }
    .knob{
      position:absolute;left:3px;top:3px;width:18px;height:18px;border-radius:50%;background:#fff;transition:transform .18s;
    }
    html[data-theme="dark"] .switch{background:#2a2a2a}
    html[data-theme="dark"] .knob{transform:translateX(20px)}

    footer{margin-top:14px;font-size:12px;color:var(--muted)}
    @media (max-width:420px){
      body{padding:14px}
      .box{padding:18px}
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="box" role="main" aria-labelledby="title">
      <img src="20251207_220518.png" class="logo" alt="Liafiz Logo">
      <h2 id="title">Liafiz Picks Search</h2>
      <p class="small">Ketik kode produk (contoh: <strong>01</strong>, <strong>02</strong>, <strong>03WB</strong>)</p>

      <div>
        <input id="code" type="text" inputmode="text" autocomplete="off" placeholder="Masukkan kode" aria-label="Masukkan kode produk (contoh 01)">
      </div>

      <div class="row" style="margin-top:12px">
        <button class="primary" id="searchBtn" onclick="searchProduct()">Search</button>
      </div>

      <div class="theme-toggle" style="margin-top:10px">
        <div class="switch" id="themeSwitch" role="button" tabindex="0" aria-pressed="false" aria-label="Toggle theme">
          <div class="knob"></div>
        </div>
        <div id="themeLabel">Mode: Otomatis</div>
      </div>

      <footer>Otomatis pakai pengaturan perangkat â€” toggle bisa override.</footer>
    </div>
  </div>

  <script>
    // -------------------------
    // Mapping produk (tetap)
    // -------------------------
    const mapping = {
      "01": "B0D1BVHC52",
      "02": "B0DYJKCVLL",
      "03WB": "B0D83ZT6YT",
      "04": "B08Q9SCLXM",
      "05": "B0DQCV6RCC",
      "06": "B08GWYCGHV"
    };
    const affiliateTag = "liafiz0e-20";

    // Search function
    function searchProduct(){
      const input = document.getElementById('code');
      const raw = (input.value || '').trim().toUpperCase();
      if(!raw){
        alert('Masukkan kode dulu, contoh: 01 atau 03WB.');
        input.focus();
        return;
      }
      if(!mapping[raw]){
        alert('Kode tidak ditemukan. Coba: 01, 02, 03WB, dll.');
        input.focus();
        return;
      }
      const asin = mapping[raw];
      const url = `https://www.amazon.com/dp/${asin}?tag=${affiliateTag}`;
      // redirect
      window.location.href = url;
    }

    // Enter => search
    document.getElementById('code').addEventListener('keydown', function(e){
      if(e.key === 'Enter') searchProduct();
    });

    // -------------------------
    // Theme: auto + manual toggle
    // -------------------------
    const themeSwitch = document.getElementById('themeSwitch');
    const themeLabel = document.getElementById('themeLabel');

    // Helper: set theme override on <html>
    function setTheme(mode){
      if(mode === 'auto'){
        document.documentElement.removeAttribute('data-theme');
        themeLabel.textContent = 'Mode: Otomatis';
        themeSwitch.setAttribute('aria-pressed','false');
      } else if(mode === 'dark'){
        document.documentElement.setAttribute('data-theme','dark');
        themeLabel.textContent = 'Mode: Gelap';
        themeSwitch.setAttribute('aria-pressed','true');
      } else {
        document.documentElement.setAttribute('data-theme','light');
        themeLabel.textContent = 'Mode: Terang';
        themeSwitch.setAttribute('aria-pressed','false');
      }
      // persist choice (auto / dark / light)
      try { localStorage.setItem('liafiz_theme', mode); } catch(e){}
    }

    // load stored pref if ada
    (function initTheme(){
      let stored;
      try { stored = localStorage.getItem('liafiz_theme'); } catch(e){ stored = null; }
      if(stored === 'dark' || stored === 'light' || stored === 'auto') {
        setTheme(stored);
      } else {
        setTheme('auto'); // default: follow device
      }
    })();

    // Toggle sequence: auto -> dark -> light -> auto ...
    themeSwitch.addEventListener('click', function(){
      const cur = localStorage.getItem('liafiz_theme') || 'auto';
      const next = (cur === 'auto') ? 'dark' : (cur === 'dark') ? 'light' : 'auto';
      setTheme(next);
    });
    // keyboard support
    themeSwitch.addEventListener('keydown', function(e){
      if(e.key === 'Enter' || e.key === ' ') { e.preventDefault(); themeSwitch.click(); }
    });
  </script>
</body>
</html>
